import{n as N,o as R,p as D,q as E,d as j,j as t,S as y,B as o,T as p,v as K,P as B,x as W,L as H,y as O,z as T,w as F}from"./index-jKwuRwNn.js";import{P as V}from"./PageHeader-mS0u6ESk.js";import{u as $}from"./useDataFromSource-COaRTzR-.js";import{C as L,a as G}from"./CircularProgress-DjKOEO3Z.js";import{C as J}from"./Close-BZJQbgFN.js";import{D as Y}from"./Divider-CQ9Z9t6a.js";import"./dividerClasses-DZmn6uHW.js";var b={},k;function Q(){if(k)return b;k=1;var e=N();Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var r=e(R()),n=D();return b.default=(0,r.default)((0,n.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight"),b}var U=Q();const X=E(U);var C={},z;function Z(){if(z)return C;z=1;var e=N();Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var r=e(R()),n=D();return C.default=(0,r.default)((0,n.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown"),C}var ee=Z();const te=E(ee),re=({color:e,label:r,isOpen:n=!1,children:a,...l})=>{const[s,i]=j.useState(n),u=()=>{i(!s)};return j.useEffect(()=>{i(n)},[n]),t.jsxs(y,{spacing:1,...l,children:[t.jsx(o,{role:"button",onClick:u,sx:{cursor:"pointer",display:"block",padding:0,textAlign:"left",textTransform:"none",width:"100%","&:hover":{background:"none",opacity:.7}},children:t.jsxs(y,{spacing:1,direction:"row",alignItems:"center",children:[!s&&t.jsx(X,{sx:{ml:"-0.5rem",mt:"-0.5rem",mb:"-0.5rem"}}),s&&t.jsx(te,{sx:{ml:"-0.5rem",mt:"-0.5rem",mb:"-0.5rem"}}),t.jsx(o,{flex:1,children:r})]})}),s&&t.jsx(o,{children:a})]})},I=15;function q({node:e,level:r,isExpanded:n,isSelected:a,searchTerm:l,expandedNodes:s,onNodeSelect:i,onToggleExpand:u}){const x=e.children&&e.children.length>0,m=r*24,h=()=>{i(e)},c=()=>{if(!l)return e.name;const d=e.name.toLowerCase().indexOf(l.toLowerCase());return d===-1?e.name:t.jsxs(t.Fragment,{children:[e.name.substring(0,d),t.jsx(o,{component:"span",sx:{backgroundColor:"warning.light",fontWeight:"bold"},children:e.name.substring(d,d+l.length)}),e.name.substring(d+l.length)]})};if(!x)return t.jsxs(o,{onClick:h,sx:{marginLeft:`${m}px`,display:"flex",alignItems:"center",gap:1,cursor:"pointer",padding:.5,paddingLeft:"2rem",borderRadius:1,backgroundColor:a?"action.selected":"transparent","&:hover":{backgroundColor:a?"action.selected":"action.hover"}},children:[t.jsx(o,{component:"span",sx:{fontWeight:a?"bold":"normal",fontSize:"1rem"},children:c()}),t.jsxs(p,{variant:"caption",color:"text.secondary",children:["(",e.id,")"]}),e.count!==void 0&&t.jsx(L,{label:e.count.toLocaleString(),size:"small",sx:{height:20,fontSize:"0.7rem"}})]});const[f,g]=j.useState(I),v=e.children,S=v.slice(0,f),M=f<v.length,P=()=>{g(d=>d+I)};return t.jsx(o,{sx:{marginLeft:`${m}px`},children:t.jsx(re,{label:t.jsxs(o,{onClick:d=>{d.stopPropagation(),h()},sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",padding:.5,borderRadius:1,backgroundColor:a?"action.selected":"transparent","&:hover":{backgroundColor:a?"action.selected":"action.hover"}},children:[t.jsx(o,{component:"span",sx:{fontWeight:a?"bold":"normal",fontSize:"1rem"},children:c()}),t.jsxs(p,{variant:"caption",color:"text.secondary",children:["(",e.id,")"]}),e.count!==void 0&&t.jsx(L,{label:e.count.toLocaleString(),size:"small",sx:{height:20,fontSize:"0.7rem"}})]}),isOpen:n,children:t.jsxs(o,{sx:{marginTop:.5},children:[S.map(d=>t.jsx(q,{node:d,level:r+1,isExpanded:s.has(d.id),isSelected:a&&d.id===e.id,searchTerm:l,expandedNodes:s,onNodeSelect:i,onToggleExpand:u},d.id)),M&&t.jsx(o,{sx:{marginLeft:"2rem",marginTop:1,marginBottom:1},children:t.jsxs(K,{size:"small",variant:"text",onClick:P,sx:{textTransform:"none"},children:["Load More (",v.length-f," remaining)"]})})]})})})}function ne({searchTerm:e,expandedNodes:r,selectedNode:n,onNodeSelect:a,onToggleExpand:l,onInitialExpand:s}){const i=$("dummy-data/hierarchy.json");if(j.useEffect(()=>{if(i&&s&&r.size===0){let m=function(c){var g,v;const f=((g=c.children)==null?void 0:g.length)||0;f>1&&f<=15&&h.add(c.id),(v=c.children)==null||v.forEach(S=>m(S))};const h=new Set;m(i),s(h)}},[i,s,r.size]),j.useEffect(()=>{e&&i&&ie(i,e).forEach(h=>{r.has(h)||l(h)})},[e,i,r,l]),!i)return t.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:t.jsx(G,{})});const u=i,x=e?A(u,e):u;return e&&!x?t.jsx(o,{sx:{padding:2},children:t.jsxs(p,{color:"text.secondary",children:['No results found for "',e,'"']})}):t.jsx(o,{children:x&&t.jsx(q,{node:x,level:0,isExpanded:r.has(x.id),isSelected:(n==null?void 0:n.id)===x.id,searchTerm:e,expandedNodes:r,onNodeSelect:a,onToggleExpand:l})})}function A(e,r){var s,i;const n=r.toLowerCase(),a=e.name.toLowerCase().includes(n)||((s=e.description)==null?void 0:s.toLowerCase().includes(n)),l=((i=e.children)==null?void 0:i.map(u=>A(u,r)).filter(u=>u!==null))||[];return a||l.length>0?{...e,children:l}:null}function ie(e,r){const n=r.toLowerCase(),a=[];function l(s,i){var x,m;(s.name.toLowerCase().includes(n)||((x=s.description)==null?void 0:x.toLowerCase().includes(n)))&&a.push(...i),(m=s.children)==null||m.forEach(h=>{l(h,[...i,s.id])})}return l(e,[]),a}function ae({node:e,onClose:r}){return t.jsxs(B,{elevation:2,sx:{padding:2,height:"100%",minHeight:"600px"},children:[t.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:[t.jsx(p,{variant:"h6",children:"Node Details"}),t.jsx(W,{onClick:r,size:"small",children:t.jsx(J,{})})]}),t.jsx(Y,{sx:{marginBottom:2}}),t.jsxs(o,{sx:{marginBottom:2},children:[t.jsx(p,{variant:"h6",gutterBottom:!0,children:e.name}),t.jsx(p,{variant:"caption",color:"text.secondary",children:e.id})]}),e.description&&t.jsx(o,{sx:{marginBottom:2},children:t.jsx(p,{variant:"body2",color:"text.secondary",children:e.description})}),t.jsx(H,{rows:[{label:"ID",value:e.id},{label:"Level",value:e.level.toString()},...e.count!==void 0?[{label:"Count",value:e.count.toLocaleString()}]:[],{label:"Has Children",value:e.children&&e.children.length>0?"Yes":"No"},...e.children&&e.children.length>0?[{label:"Children Count",value:e.children.length.toString()}]:[]]}),e.children&&e.children.length>0&&t.jsxs(o,{sx:{marginTop:3},children:[t.jsx(p,{variant:"subtitle2",gutterBottom:!0,children:"Child Nodes"}),t.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,marginTop:1},children:e.children.map(n=>t.jsx(L,{label:n.name,size:"small",variant:"outlined"},n.id))})]})]})}var w={},_;function oe(){if(_)return w;_=1;var e=N();Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var r=e(R()),n=D();return w.default=(0,r.default)((0,n.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),w}var se=oe();const le=E(se);function ce({selectedNode:e,onNodeSelect:r}){return t.jsxs(O,{separator:t.jsx(le,{fontSize:"small"}),"aria-label":"breadcrumb",sx:{marginBottom:1},children:[t.jsx(T,{component:"button",variant:"body2",onClick:()=>r(e),sx:{cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Root"}),t.jsx(p,{variant:"body2",color:"text.primary",children:e.name})]})}const fe=function(){const[r,n]=j.useState(""),[a,l]=j.useState(null),[s,i]=j.useState(new Set),u=()=>{l(null)},x=c=>{l(c)},m=c=>{i(f=>{const g=new Set(f);return g.has(c)?g.delete(c):g.add(c),g})},h=c=>{i(c)};return t.jsxs(o,{children:[t.jsx(V,{pageTitle:"Navigate Hierarchies",description:"Explore ontologies, taxonomies, and nested data structures",sx:{marginBottom:1,padding:2}}),t.jsx(o,{sx:{padding:2},children:t.jsxs(y,{spacing:2,children:[t.jsx(F,{fullWidth:!0,size:"small",placeholder:"Search nodes by name or description...",value:r,onChange:c=>n(c.target.value),sx:{maxWidth:600}}),a&&t.jsx(ce,{selectedNode:a,onNodeSelect:x}),t.jsxs(y,{direction:"row",spacing:2,children:[t.jsx(B,{elevation:0,sx:{flex:1,minHeight:"600px",padding:2,overflow:"auto"},children:t.jsx(ne,{searchTerm:r,expandedNodes:s,selectedNode:a,onNodeSelect:x,onToggleExpand:m,onInitialExpand:h})}),a&&t.jsx(o,{sx:{minWidth:"350px",maxWidth:"400px"},children:t.jsx(ae,{node:a,onClose:u})})]})]})})]})};export{fe as component};
